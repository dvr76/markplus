<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>markplus - Example</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "IBM Plex Sans", sans-serif;
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      h1,
      h2 {
        color: #333;
      }
      .container {
        background: white;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 20px;
        margin: 20px 0;
      }
      .fingerprint {
        background: #f9f9f9;
        border: 1px solid #ddd;
        padding: 15px;
        margin: 15px 0;
        word-break: break-all;
        font-family: "Courier New", monospace;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
      }
      th,
      td {
        padding: 10px;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }
      th {
        background: #f0f0f0;
        font-weight: bold;
      }
      tr:hover {
        background: #f9f9f9;
      }
      button {
        background: #3498db;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }
      button:hover {
        background: #2980b9;
      }
      button:active {
        background: #21618c;
      }
      .loading {
        color: #666;
        font-style: italic;
      }
      .credit {
        background: #f0f8ff;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin: 20px 0;
      }
      pre {
        background: #f4f4f4;
        border: 1px solid #ddd;
        padding: 15px;
        overflow-x: auto;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <h1>markplus - Browser Fingerprinting Example</h1>

    <div class="credit">
      <strong>Fork of ThumbmarkJS:</strong> This project is based on
      <a href="https://github.com/thumbmarkjs/thumbmarkjs" target="_blank"
        >ThumbmarkJS</a
      >
      by Ilkka Peltola. This is a simple side project that extends the
      MIT-licensed version.
    </div>

    <div class="container">
      <h2>Generate Fingerprint</h2>
      <button onclick="generateFingerprint()">Generate Fingerprint</button>
      <div id="loading" class="loading" style="display: none">
        Generating fingerprint...
      </div>
    </div>

    <div id="results" style="display: none">
      <div class="container">
        <h2>Your Browser Fingerprint</h2>
        <div class="fingerprint" id="fingerprint"></div>
      </div>

      <div class="container">
        <h2>TLS Capabilities</h2>
        <table>
          <tr>
            <th>Property</th>
            <th>Value</th>
          </tr>
          <tr>
            <td>Secure Context</td>
            <td id="secureContext"></td>
          </tr>
          <tr>
            <td>TLS 1.2</td>
            <td id="tls12"></td>
          </tr>
          <tr>
            <td>TLS 1.3</td>
            <td id="tls13"></td>
          </tr>
          <tr>
            <td>Web Crypto API</td>
            <td id="webCrypto"></td>
          </tr>
          <tr>
            <td>Supported Algorithms</td>
            <td id="algorithms"></td>
          </tr>
        </table>
      </div>

      <div class="container">
        <h2>Protocol Support</h2>
        <table>
          <tr>
            <th>Protocol</th>
            <th>Supported</th>
          </tr>
          <tr>
            <td>HTTP/1.1</td>
            <td id="http1"></td>
          </tr>
          <tr>
            <td>HTTP/2</td>
            <td id="http2"></td>
          </tr>
          <tr>
            <td>HTTP/3 (QUIC)</td>
            <td id="http3"></td>
          </tr>
          <tr>
            <td>WebSocket</td>
            <td id="websocket"></td>
          </tr>
          <tr>
            <td>WebRTC</td>
            <td id="webrtc"></td>
          </tr>
        </table>
      </div>

      <div class="container">
        <h2>Complete Data (JSON)</h2>
        <pre id="rawData"></pre>
      </div>
    </div>

    <script type="module">
      import { getThumbmark } from "../dist/thumbmark.esm.js";

      window.generateFingerprint = async function () {
        document.getElementById("loading").style.display = "block";
        document.getElementById("results").style.display = "none";

        try {
          const result = await getThumbmark({
            performance: false,
          });

          console.log("Fingerprint result:", result);

          // Display fingerprint
          document.getElementById("fingerprint").textContent = result.thumbmark;

          // TLS capabilities
          const tls = result.components.tls || {};
          document.getElementById("secureContext").textContent =
            tls.secureContext ? "Yes" : "No";
          document.getElementById("tls12").textContent = tls.protocols?.tls12
            ? "Yes"
            : "No";
          document.getElementById("tls13").textContent = tls.protocols?.tls13
            ? "Yes"
            : "No";
          document.getElementById("webCrypto").textContent = tls.crypto?.subtle
            ? "Yes"
            : "No";
          document.getElementById("algorithms").textContent =
            tls.crypto?.algorithms?.length || 0;

          // Protocol support
          const protocol = result.components.protocol || {};
          document.getElementById("http1").textContent = protocol.http?.http1
            ? "Yes"
            : "No";
          document.getElementById("http2").textContent = protocol.http?.http2
            ? "Yes"
            : "No";
          document.getElementById("http3").textContent = protocol.http?.http3
            ? "Yes"
            : "No";
          document.getElementById("websocket").textContent = protocol.extensions
            ?.websocket
            ? "Yes"
            : "No";
          document.getElementById("webrtc").textContent = protocol.extensions
            ?.webrtc
            ? "Yes"
            : "No";

          // Raw data
          document.getElementById("rawData").textContent = JSON.stringify(
            result,
            null,
            2
          );

          // Show results
          document.getElementById("loading").style.display = "none";
          document.getElementById("results").style.display = "block";
        } catch (error) {
          console.error("Error generating fingerprint:", error);
          document.getElementById("loading").textContent =
            "Error: " + error.message;
        }
      };

      // Auto-run on page load
      window.addEventListener("load", () => {
        setTimeout(() => {
          window.generateFingerprint();
        }, 500);
      });
    </script>
  </body>
</html>
